version: '2'

services:

  cqrs_test:
    container_name: cqrs_test
    build:
      context: ./../../
      dockerfile: docker/test/dockerfile
    working_dir: /usr/app
    depends_on:
      - rethinkdb_cqrs_test
      - rabbitmq_cqrs_test

  rethinkdb_cqrs_test:
    container_name: rethinkdb_cqrs_test
    image: "rethinkdb:latest"
    networks:
      - network_cqrs_test
    ports:
      - "8080:8080"
      - "28015:28015"

  rabbitmq_cqrs_test:
    container_name: rabbitmq_cqrs_test
    image: "rabbitmq:management"
    networks:
      - network_cqrs_test
    ports:
      - "5672:5672"
      - "15672:15672"

networks:
  network_cqrs_test:
    driver: bridge
