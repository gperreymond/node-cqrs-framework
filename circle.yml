machine:

  environment:
    CQRS_RETHINKDB_PORT: 28015
    CQRS_RETHINKDB_DB: test
    CQRS_RETHINKDB_USER: admin
    CQRS_RETHINKDB_HOST: localhost
    CQRS_RABBITMQ_PORT: 5672
    CQRS_RABBITMQ_HOST: localhost

  timezone:
    Europe/Paris

  node:
    version: 6.7.0

  services:
    - docker

dependencies:

  cache_directories:
    - node_modules

  override:
    - sh ./script/ci-bootstrap-rabbitmq.sh
    - sh ./script/ci-bootstrap-rethinkdb.sh

test:

  override:
    - npm install
    - npm prune
    - npm test
